!function(t,o){"object"==typeof exports&&"object"==typeof module?module.exports=o():"function"==typeof define&&define.amd?define([],o):"object"==typeof exports?exports.tables=o():t.tables=o()}(this,(()=>(()=>{"use strict";var t,o,e,n={},i={};function a(t){var o=i[t];if(void 0!==o)return o.exports;var e=i[t]={exports:{}};return n[t].call(e.exports,e,e.exports,a),e.exports}a.m=n,o=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,a.t=function(e,n){if(1&n&&(e=this(e)),8&n)return e;if("object"==typeof e&&e){if(4&n&&e.__esModule)return e;if(16&n&&"function"==typeof e.then)return e}var i=Object.create(null);a.r(i);var l={};t=t||[null,o({}),o([]),o(o)];for(var r=2&n&&e;"object"==typeof r&&!~t.indexOf(r);r=o(r))Object.getOwnPropertyNames(r).forEach((t=>l[t]=()=>e[t]));return l.default=()=>e,a.d(i,l),i},a.d=(t,o)=>{for(var e in o)a.o(o,e)&&!a.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:o[e]})},a.f={},a.e=t=>Promise.all(Object.keys(a.f).reduce(((o,e)=>(a.f[e](t,o),o)),[])),a.u=t=>t+".chunk.js",a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),a.o=(t,o)=>Object.prototype.hasOwnProperty.call(t,o),e={},a.l=(t,o,n,i)=>{if(e[t])e[t].push(o);else{var l,r;if(void 0!==n)for(var s=document.getElementsByTagName("script"),p=0;p<s.length;p++){var u=s[p];if(u.getAttribute("src")==t){l=u;break}}l||(r=!0,(l=document.createElement("script")).charset="utf-8",l.timeout=120,a.nc&&l.setAttribute("nonce",a.nc),l.src=t),e[t]=[o];var c=(o,n)=>{l.onerror=l.onload=null,clearTimeout(d);var i=e[t];if(delete e[t],l.parentNode&&l.parentNode.removeChild(l),i&&i.forEach((t=>t(n))),o)return o(n)},d=setTimeout(c.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=c.bind(null,l.onerror),l.onload=c.bind(null,l.onload),r&&document.head.appendChild(l)}},a.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;a.g.importScripts&&(t=a.g.location+"");var o=a.g.document;if(!t&&o&&(o.currentScript&&"SCRIPT"===o.currentScript.tagName.toUpperCase()&&(t=o.currentScript.src),!t)){var e=o.getElementsByTagName("script");if(e.length)for(var n=e.length-1;n>-1&&(!t||!/^http(s?):/.test(t));)t=e[n--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=t})(),(()=>{var t={796:0};a.f.j=(o,e)=>{var n=a.o(t,o)?t[o]:void 0;if(0!==n)if(n)e.push(n[2]);else{var i=new Promise(((e,i)=>n=t[o]=[e,i]));e.push(n[2]=i);var l=a.p+a.u(o),r=new Error;a.l(l,(e=>{if(a.o(t,o)&&(0!==(n=t[o])&&(t[o]=void 0),n)){var i=e&&("load"===e.type?"missing":e.type),l=e&&e.target&&e.target.src;r.message="Loading chunk "+o+" failed.\n("+i+": "+l+")",r.name="ChunkLoadError",r.type=i,r.request=l,n[1](r)}}),"chunk-"+o,o)}};var o=(o,e)=>{var n,i,[l,r,s]=e,p=0;if(l.some((o=>0!==t[o]))){for(n in r)a.o(r,n)&&(a.m[n]=r[n]);s&&s(a)}for(o&&o(e);p<l.length;p++)i=l[p],a.o(t,i)&&t[i]&&t[i][0](),t[i]=0},e=this.webpackChunk=this.webpackChunk||[];e.forEach(o.bind(null,0)),e.push=o.bind(null,e.push.bind(e))})();class l{itemId;quantity;product;constructor(t=0,o=0,e=""){this.itemId=t,this.quantity=o,this.product=e}static async create(t=0,o=0,e=""){return new l(t,o,e)}}class r{static gameSaveId=Number($("#gameSaveId").val())??0;static url=new URL(window.location.href);static productionLineId=parseInt(this.url.searchParams.get("id"));static getRecipe(t){return new Promise((function(o,e){$.ajax({type:"GET",url:"getRecipe",data:{id:t},headers:{"X-CSRF-Token":r._getCsrfToken()},dataType:"json",success:function(t){try{o(t)}catch(t){e(t)}},error:function(t,o,n){e(n)}})}))}static getBuilding(t){return new Promise((function(o,e){$.ajax({type:"GET",url:"getBuilding",data:{id:t},headers:{"X-CSRF-Token":r._getCsrfToken()},dataType:"json",success:function(t){try{o(t)}catch(t){e(t)}},error:function(t,o,n){e(n)}})}))}static async saveData(t,o){return new Promise(((e,n)=>{$.ajax({type:"POST",url:"saveProductionLine",data:{gameSaveId:this.gameSaveId,data:JSON.stringify(t),id:o},headers:{"X-CSRF-Token":r._getCsrfToken()},success:function(t){e(JSON.parse(t))},error:function(t,o,e){n(e)}})}))}static saveSettings(t,o,e,n){$.ajax({type:"POST",url:"updateProductionLineSettings",headers:{"X-CSRF-Token":r._getCsrfToken()},data:{gameSaveId:this.gameSaveId,productionLineId:t,autoImportExport:o,autoPowerMachine:e,autoSave:n}})}static _getCsrfToken(){const t=$('meta[name="csrf-token"]');if(0===t.length||void 0===t.attr("content"))throw new Error("CSRF token not found");return t.attr("content")}static saveChecklist(t){$.ajax({url:"/saveChecklist",method:"POST",data:{checklist:JSON.stringify(t),productionLineId:this.productionLineId},headers:{"X-CSRF-Token":r._getCsrfToken()},success:t=>{console.log(t)},error:t=>{console.error(t)}})}}class s{Product;Usage;ExportPerMin;Quantity;constructor(t="",o=0,e=0,n=0){this.Product=t,this.Usage=o,this.ExportPerMin=e,this.Quantity=n}}class p{static async calculateProductionExport(t){if(t.exportPerMin=t.quantity-t.Usage,t.doubleExport&&null!==t.recipe){const o=this.calculateSecondExportPerMin(t);void 0!==o&&(t.extraCells.Quantity=o,t.extraCells.ExportPerMin=o)}}static async updateRecipe(t,o){await this.saveRecipe(o,t);const e=t.recipe;if(null!==e&&(t.recipeId=e.id,t.product=e.itemName,t.doubleExport=null!==e.secondItemName,t.doubleExport)){const o=+e.export_amount_per_min,n=+e.export_amount_per_min2/o,i=t.quantity;t.extraCells=new s(e.secondItemName,0,i*n)}}static async saveRecipe(t,o){o.recipe=await r.getRecipe(+t)}static handleDoubleExport(t,o){if(t.doubleExport&&null!==t.extraCells)if(o.next(".extra-output").length){const e=o.next(".extra-output"),n=e.find('input[name="production_usage2[]"]'),i=e.find('input[name="production_export2[]"]');n.val(t.extraCells.Usage),i.val(t.extraCells.ExportPerMin)}else o.find("td:nth-child(2)").attr("rowspan",2),o.find("td:nth-child(3)").attr("rowspan",2),o.find("td:nth-child(2) select").css("height","78px"),o.find("td:nth-child(3) input").css("height","78px"),$(`\n                    <tr class="extra-output">\n                        <td class="m-0 p-0">\n                            <input type="text" name="product" value="${t.extraCells.Product}" class="form-control rounded-0" readonly>\n                        </td>\n                        <td class="m-0 p-0">\n                            <input type="number" name="production_usage2[]" value="${t.extraCells.Usage}" class="form-control rounded-0" readonly step="any">\n                        </td>\n                        <td class="m-0 p-0">\n                            <input type="number" name="production_export2[]" value="${t.extraCells.ExportPerMin}" class="form-control rounded-0" readonly step="any">\n                        </td>\n                    </tr>\n                `).insertAfter(o);else o.next(".extra-output").length&&(o.next(".extra-output").remove(),o.find("td:nth-child(2)").removeAttr("rowspan"),o.find("td:nth-child(3)").removeAttr("rowspan"),o.find("td:nth-child(2) select").css("height",""),o.find("td:nth-child(3) input").css("height",""))}static calculateSecondExportPerMin(t){if(null===t.recipe)return;const o=t.recipe.export_amount_per_min2,e=t.recipe.export_amount_per_min;if(null===o||null===e)return;const n=o/e;return t.quantity*n}}const u={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let c;const d=new Uint8Array(16),h=[];for(let t=0;t<256;++t)h.push((t+256).toString(16).slice(1));const m=function(t,o,e){if(u.randomUUID&&!o&&!t)return u.randomUUID();const n=(t=t||{}).random??t.rng?.()??function(){if(!c){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");c=crypto.getRandomValues.bind(crypto)}return c(d)}();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,o){if((e=e||0)<0||e+16>o.length)throw new RangeError(`UUID byte range ${e}:${e+15} is out of buffer bounds`);for(let t=0;t<16;++t)o[e+t]=n[t];return o}return function(t,o=0){return(h[t[o+0]]+h[t[o+1]]+h[t[o+2]]+h[t[o+3]]+"-"+h[t[o+4]]+h[t[o+5]]+"-"+h[t[o+6]]+h[t[o+7]]+"-"+h[t[o+8]]+h[t[o+9]]+"-"+h[t[o+10]]+h[t[o+11]]+h[t[o+12]]+h[t[o+13]]+h[t[o+14]]+h[t[o+15]]).toLowerCase()}(n)};class v{row_id;recipeId;quantity;product;Usage;exportPerMin;doubleExport;extraCells;recipe;imports;productionImports;constructor(t=m(),o="",e=0,n="",i=0,a=0,l=!1,r=null){this.row_id=t,this.recipeId=+o,this.quantity=e,this.product=n,this.Usage=i,this.exportPerMin=a,this.doubleExport=l,this.extraCells=r,this.recipe=null,this.imports=[],this.productionImports=[]}static async create(t=0,o="",e=0,n="",i=0,a=0,l=!1,s=null,u=[]){const c=new v(t,o,e,n,i,a,l,s);return null==c.recipe&&(c.recipe=u.find((t=>t.id===+o))||null,null==c.recipe&&o&&(c.recipe=await r.getRecipe(+o),c.recipe&&!u.find((t=>t.id===c.recipe?.id))&&u.push(c.recipe))),null!==c.extraCells&&(c.extraCells.Quantity=p.calculateSecondExportPerMin(c)),c}async getRecipe(t){this.recipe=await r.getRecipe(+t)}saveDoubleExportQuantity(){this.doubleExport&&null!==this.extraCells&&(this.extraCells.Quantity=p.calculateSecondExportPerMin(this))}}class g{buildingId;quantity;clockSpeed;Consumption;userRow;building;constructor(t=NaN,o=0,e=100,n=0,i=!0,a=null){this.buildingId=t,this.quantity=o,this.clockSpeed=e,this.Consumption=n,this.userRow=i,this.building=a}static async create(t=NaN,o=0,e=100,n=0,i=!0,a=null,l=[]){if("string"==typeof i)switch(i.toLowerCase()){case"0":case"false":i=!1;break;default:i=!0}const s=new g(t,o,e,n,i,a);if(!a&&t&&(s.building=l.find((o=>o.id===+t))||null,!s.building)){const o=await r.getBuilding(t);o&&!l.find((t=>t.id===o.id))&&l.push(o),s.building=o}return s}}const b='\n<option value="" disabled>Select a building</option>\n<option value="16">Assembler</option>\n<option value="247">AWESOME Sink</option>\n<option value="17">Blender</option>\n<option value="19">Constructor</option>\n<option value="6">Converter</option>\n<option value="13">Foundry</option>\n<option value="246">Hypertube Entrance</option>\n<option value="21">Main Portal</option>\n<option value="15">Manufacturer</option>\n<option value="10">Miner Mk.1</option>\n<option value="9">Miner Mk.2</option>\n<option value="11">Miner Mk.3</option>\n<option value="8">Oil Extractor</option>\n<option value="14">Packager</option>\n<option value="7">Particle Accelerator</option>\n<option value="249">Pipeline Pump Mk.1</option>\n<option value="248">Pipeline Pump Mk.2</option>\n<option value="5">Quantum Encoder</option>\n<option value="12">Refinery</option>\n<option value="22">Satellite Portal</option>\n<option value="18">Smelter</option>\n<option value="250">Valve</option>\n<option value="4">Water Extractor</option>\n',w='\n<option value="" disabled>Select an item</option>\n<option value="111">Actual Snow</option>\n<option value="82">Adaptive Control Unit</option>\n<option value="48">AI Expansion Server</option>\n<option value="79">AI Limiter</option>\n<option value="45">Alclad Aluminum Sheet</option>\n<option value="102">Alien DNA Capsule</option>\n<option value="100">Alien Protein</option>\n<option value="72">Alumina Solution</option>\n<option value="71">Aluminum Casing</option>\n<option value="7">Aluminum Ingot</option>\n<option value="70">Aluminum Scrap</option>\n<option value="56">Assembly Director System</option>\n<option value="77">Automated Wiring</option>\n<option value="98">Ballistic Warp Drive</option>\n<option value="8">Battery</option>\n<option value="128">Bauxite</option>\n<option value="55">Biochemical Sculptor</option>\n<option value="137">Biomass</option>\n<option value="95">Black Powder</option>\n<option value="117">Blue FICSMAS Ornament</option>\n<option value="101">Blue Power Slug</option>\n<option value="20">Cable</option>\n<option value="110">Candy Cane</option>\n<option value="57">Caterium Ingot</option>\n<option value="129">Caterium Ore</option>\n<option value="59">Circuit Board</option>\n<option value="123">Coal</option>\n<option value="14">Compacted Coal</option>\n<option value="73">Computer</option>\n<option value="3">Concrete</option>\n<option value="37">Cooling System</option>\n<option value="113">Copper FICSMAS Ornament</option>\n<option value="69">Copper Ingot</option>\n<option value="130">Copper Ore</option>\n<option value="88">Copper Powder</option>\n<option value="26">Copper Sheet</option>\n<option value="134">Crude Oil</option>\n<option value="32">Crystal Oscillator</option>\n<option value="34">Dark Matter Crystal</option>\n<option value="41">Dark Matter Residue</option>\n<option value="44">Diamonds</option>\n<option value="93">Dissolved Silica</option>\n<option value="90">Electromagnetic Control Rod</option>\n<option value="58">Empty Canister</option>\n<option value="31">Empty Fluid Tank</option>\n<option value="61">Encased Industrial Beam</option>\n<option value="84">Encased Plutonium Cell</option>\n<option value="92">Encased Uranium Cell</option>\n<option value="43">Excited Photonic Matter</option>\n<option value="146">Fabric</option>\n<option value="54">Ficsite Ingot</option>\n<option value="38">Ficsite Trigon</option>\n<option value="112">FICSMAS Bow</option>\n<option value="109">FICSMAS Decoration</option>\n<option value="118">FICSMAS Gift</option>\n<option value="108">FICSMAS Ornament Bundle</option>\n<option value="115">FICSMAS Tree Branch</option>\n<option value="107">FICSMAS Wonder Star</option>\n<option value="96">Ficsonium</option>\n<option value="121">Ficsonium Fuel Rod</option>\n<option value="24">Fuel</option>\n<option value="52">Fused Modular Frame</option>\n<option value="99">Gas Filter</option>\n<option value="150">Hatcher Remains</option>\n<option value="89">Heat Sink</option>\n<option value="74">Heavy Modular Frame</option>\n<option value="64">Heavy Oil Residue</option>\n<option value="76">High-Speed Connector</option>\n<option value="147">Hog Remains</option>\n<option value="13">Iodine-Infused Filter</option>\n<option value="35">Ionized Fuel</option>\n<option value="114">Iron FICSMAS Ornament</option>\n<option value="21">Iron Ingot</option>\n<option value="122">Iron Ore</option>\n<option value="5">Iron Plate</option>\n<option value="18">Iron Rod</option>\n<option value="138">Leaves</option>\n<option value="132">Limestone</option>\n<option value="141">Liquid Biofuel</option>\n<option value="49">Magnetic Field Generator</option>\n<option value="103">Mercer Sphere</option>\n<option value="81">Modular Engine</option>\n<option value="27">Modular Frame</option>\n<option value="33">Motor</option>\n<option value="139">Mycelia</option>\n<option value="47">Neural-Quantum Processor</option>\n<option value="29">Nitric Acid</option>\n<option value="125">Nitrogen Gas</option>\n<option value="86">Non-Fissile Uranium</option>\n<option value="91">Nuclear Pasta</option>\n<option value="142">Packaged Alumina Solution</option>\n<option value="9">Packaged Fuel</option>\n<option value="15">Packaged Heavy Oil Residue</option>\n<option value="10">Packaged Ionized Fuel</option>\n<option value="136">Packaged Liquid Biofuel</option>\n<option value="144">Packaged Nitric Acid</option>\n<option value="143">Packaged Nitrogen Gas</option>\n<option value="17">Packaged Oil</option>\n<option value="11">Packaged Rocket Fuel</option>\n<option value="145">Packaged Sulfuric Acid</option>\n<option value="12">Packaged Turbofuel</option>\n<option value="68">Packaged Water</option>\n<option value="16">Petroleum Coke</option>\n<option value="60">Plastic</option>\n<option value="120">Plutonium Fuel Rod</option>\n<option value="85">Plutonium Pellet</option>\n<option value="2">Plutonium Waste</option>\n<option value="63">Polymer Resin</option>\n<option value="83">Pressure Conversion Cube</option>\n<option value="104">Purple Power Slug</option>\n<option value="65">Quartz Crystal</option>\n<option value="80">Quickwire</option>\n<option value="53">Radio Control Unit</option>\n<option value="131">Raw Quartz</option>\n<option value="42">Reanimated SAM</option>\n<option value="116">Red FICSMAS Ornament</option>\n<option value="22">Reinforced Iron Plate</option>\n<option value="25">Rocket Fuel</option>\n<option value="23">Rotor</option>\n<option value="62">Rubber</option>\n<option value="127">SAM</option>\n<option value="50">SAM Fluctuator</option>\n<option value="28">Screw</option>\n<option value="4">Silica</option>\n<option value="97">Singularity Cell</option>\n<option value="75">Smart Plating</option>\n<option value="106">Smokeless Powder</option>\n<option value="135">Solid Biofuel</option>\n<option value="148">Spitter Remains</option>\n<option value="78">Stator</option>\n<option value="6">Steel Beam</option>\n<option value="66">Steel Ingot</option>\n<option value="51">Steel Pipe</option>\n<option value="149">Stinger Remains</option>\n<option value="126">Sulfur</option>\n<option value="87">Sulfuric Acid</option>\n<option value="36">Supercomputer</option>\n<option value="46">Superposition Oscillator</option>\n<option value="94">Thermal Propulsion Rocket</option>\n<option value="40">Time Crystal</option>\n<option value="39">Turbo Motor</option>\n<option value="30">Turbofuel</option>\n<option value="133">Uranium</option>\n<option value="119">Uranium Fuel Rod</option>\n<option value="1">Uranium Waste</option>\n<option value="67">Versatile Framework</option>\n<option value="124">Water</option>\n<option value="19">Wire</option>\n<option value="140">Wood</option>\n<option value="105">Yellow Power Slug</option>\n',f='\n    <option value="" disabled>Select a recipe</option>\n    <option value="259">Actual Snow</option>\n    <option value="116">Adaptive Control Unit</option>\n    <option value="14">AI Expansion Server</option>\n    <option value="110">AI Limiter</option>\n    <option value="95">Alclad Aluminum Sheet</option>\n    <option value="245">Alien DNA Capsule</option>\n    <option value="242">Alien Power Matrix</option>\n    <option value="133">Alternate: Adhered Iron Plate</option>\n    <option value="177">Alternate: Alclad Casing</option>\n    <option value="182">Alternate: Aluminum Beam</option>\n    <option value="183">Alternate: Aluminum Rod</option>\n    <option value="105">Alternate: Automated Speed Wiring</option>\n    <option value="189">Alternate: Basic Iron Ingot</option>\n    <option value="49">Alternate: Biocoal</option>\n    <option value="132">Alternate: Bolted Frame</option>\n    <option value="208">Alternate: Bolted Iron Plate</option>\n    <option value="204">Alternate: Cast Screw</option>\n    <option value="227">Alternate: Caterium Circuit Board</option>\n    <option value="226">Alternate: Caterium Computer</option>\n    <option value="194">Alternate: Caterium Wire</option>\n    <option value="48">Alternate: Charcoal</option>\n    <option value="202">Alternate: Cheap Silica</option>\n    <option value="176">Alternate: Classic Battery</option>\n    <option value="62">Alternate: Cloudy Diamonds</option>\n    <option value="131">Alternate: Coated Cable</option>\n    <option value="130">Alternate: Coated Iron Canister</option>\n    <option value="129">Alternate: Coated Iron Plate</option>\n    <option value="128">Alternate: Coke Steel Ingot</option>\n    <option value="50">Alternate: Compacted Coal</option>\n    <option value="215">Alternate: Compacted Steel Ingot</option>\n    <option value="175">Alternate: Cooling Device</option>\n    <option value="127">Alternate: Copper Alloy Ingot</option>\n    <option value="122">Alternate: Copper Rotor</option>\n    <option value="225">Alternate: Crystal Computer</option>\n    <option value="64">Alternate: Dark Matter Crystallization</option>\n    <option value="63">Alternate: Dark Matter Trap</option>\n    <option value="8">Alternate: Dark-Ion Fuel</option>\n    <option value="174">Alternate: Diluted Fuel</option>\n    <option value="121">Alternate: Diluted Packaged Fuel</option>\n    <option value="185">Alternate: Distilled Silica</option>\n    <option value="173">Alternate: Electric Motor</option>\n    <option value="120">Alternate: Electrode Aluminum Scrap</option>\n    <option value="119">Alternate: Electrode Circuit Board</option>\n    <option value="222">Alternate: Electromagnetic Connection Rod</option>\n    <option value="206">Alternate: Encased Industrial Pipe</option>\n    <option value="172">Alternate: Fertile Uranium</option>\n    <option value="221">Alternate: Fine Black Powder</option>\n    <option value="224">Alternate: Fine Concrete</option>\n    <option value="118">Alternate: Flexible Framework</option>\n    <option value="187">Alternate: Fused Quartz Crystal</option>\n    <option value="210">Alternate: Fused Quickwire</option>\n    <option value="117">Alternate: Fused Wire</option>\n    <option value="220">Alternate: Heat Exchanger</option>\n    <option value="171">Alternate: Heat-Fused Frame</option>\n    <option value="219">Alternate: Heavy Encased Frame</option>\n    <option value="112">Alternate: Heavy Flexible Frame</option>\n    <option value="111">Alternate: Heavy Oil Residue</option>\n    <option value="196">Alternate: Infused Uranium Cell</option>\n    <option value="170">Alternate: Instant Plutonium Cell</option>\n    <option value="169">Alternate: Instant Scrap</option>\n    <option value="230">Alternate: Insulated Cable</option>\n    <option value="223">Alternate: Insulated Crystal Oscillator</option>\n    <option value="217">Alternate: Iron Alloy Ingot</option>\n    <option value="179">Alternate: Iron Pipe</option>\n    <option value="195">Alternate: Iron Wire</option>\n    <option value="193">Alternate: Leached Caterium Ingot</option>\n    <option value="191">Alternate: Leached Copper Ingot</option>\n    <option value="188">Alternate: Leached Iron ingot</option>\n    <option value="181">Alternate: Molded Beam</option>\n    <option value="178">Alternate: Molded Steel Pipe</option>\n    <option value="4">Alternate: Nitro Rocket Fuel</option>\n    <option value="163">Alternate: OC Supercomputer</option>\n    <option value="61">Alternate: Oil-Based Diamonds</option>\n    <option value="60">Alternate: Petroleum Diamonds</option>\n    <option value="59">Alternate: Pink Diamonds</option>\n    <option value="184">Alternate: Plastic AI Limiter</option>\n    <option value="104">Alternate: Plastic Smart Plating</option>\n    <option value="162">Alternate: Plutonium Fuel Unit</option>\n    <option value="248">Alternate: Polyester Fabric</option>\n    <option value="103">Alternate: Polymer Resin</option>\n    <option value="93">Alternate: Pure Aluminum Ingot</option>\n    <option value="92">Alternate: Pure Caterium Ingot</option>\n    <option value="91">Alternate: Pure Copper Ingot</option>\n    <option value="90">Alternate: Pure Iron Ingot</option>\n    <option value="88">Alternate: Pure Quartz Crystal</option>\n    <option value="186">Alternate: Quartz Purification</option>\n    <option value="229">Alternate: Quickwire Cable</option>\n    <option value="201">Alternate: Quickwire Stator</option>\n    <option value="209">Alternate: Radio Connection Unit</option>\n    <option value="161">Alternate: Radio Control System</option>\n    <option value="211">Alternate: Recycled Plastic</option>\n    <option value="87">Alternate: Recycled Rubber</option>\n    <option value="213">Alternate: Rigor Motor</option>\n    <option value="86">Alternate: Rubber Concrete</option>\n    <option value="228">Alternate: Silicon Circuit Board</option>\n    <option value="218">Alternate: Silicon High-Speed Connector</option>\n    <option value="160">Alternate: Sloppy Alumina</option>\n    <option value="216">Alternate: Solid Steel Ingot</option>\n    <option value="85">Alternate: Steamed Copper Sheet</option>\n    <option value="72">Alternate: Steel Canister</option>\n    <option value="180">Alternate: Steel Cast Plate</option>\n    <option value="67">Alternate: Steel Rod</option>\n    <option value="205">Alternate: Steel Rotor</option>\n    <option value="203">Alternate: Steel Screw</option>\n    <option value="214">Alternate: Steeled Frame</option>\n    <option value="207">Alternate: Stitched Iron Plate</option>\n    <option value="156">Alternate: Super-State Computer</option>\n    <option value="192">Alternate: Tempered Caterium Ingot</option>\n    <option value="190">Alternate: Tempered Copper Ingot</option>\n    <option value="145">Alternate: Turbo Blend Fuel</option>\n    <option value="18">Alternate: Turbo Diamonds</option>\n    <option value="198">Alternate: Turbo Electric Motor</option>\n    <option value="66">Alternate: Turbo Heavy Fuel</option>\n    <option value="134">Alternate: Turbo Pressure Motor</option>\n    <option value="212">Alternate: Uranium Fuel Unit</option>\n    <option value="65">Alternate: Wet Concrete</option>\n    <option value="96">Alumina Solution</option>\n    <option value="94">Aluminum Casing</option>\n    <option value="99">Aluminum Ingot</option>\n    <option value="97">Aluminum Scrap</option>\n    <option value="153">Assembly Director System</option>\n    <option value="109">Automated Wiring</option>\n    <option value="234">Ballistic Warp Drive</option>\n    <option value="148">Battery</option>\n    <option value="28">Bauxite (Caterium)</option>\n    <option value="29">Bauxite (Copper)</option>\n    <option value="25">Biochemical Sculptor</option>\n    <option value="240">Biomass (Mycelia)</option>\n    <option value="246">Biomass (Alien Protein)</option>\n    <option value="263">Biomass (Leaves)</option>\n    <option value="264">Biomass (Wood)</option>\n    <option value="241">Black Powder</option>\n    <option value="256">Blue FICSMAS Ornament</option>\n    <option value="268">Cable</option>\n    <option value="262">Candy Cane</option>\n    <option value="197">Caterium Ingot</option>\n    <option value="30">Caterium Ore (Copper)</option>\n    <option value="31">Caterium Ore (Quartz)</option>\n    <option value="51">Circuit Board</option>\n    <option value="32">Coal (Iron)</option>\n    <option value="33">Coal (Limestone)</option>\n    <option value="113">Computer</option>\n    <option value="266">Concrete</option>\n    <option value="147">Cooling System</option>\n    <option value="257">Copper FICSMAS Ornament</option>\n    <option value="270">Copper Ingot</option>\n    <option value="34">Copper Ore (Quartz)</option>\n    <option value="35">Copper Ore (Sulfur)</option>\n    <option value="139">Copper Powder</option>\n    <option value="125">Copper Sheet</option>\n    <option value="101">Crystal Oscillator</option>\n    <option value="11">Dark Matter Crystal</option>\n    <option value="9">Dark Matter Residue</option>\n    <option value="23">Diamonds</option>\n    <option value="157">Electromagnetic Control Rod</option>\n    <option value="73">Empty Canister</option>\n    <option value="166">Empty Fluid Tank</option>\n    <option value="106">Encased Industrial Beam</option>\n    <option value="135">Encased Plutonium Cell</option>\n    <option value="146">Encased Uranium Cell</option>\n    <option value="10">Excited Photonic Matter</option>\n    <option value="249">Fabric</option>\n    <option value="21">Ficsite Ingot (Iron)</option>\n    <option value="26">Ficsite Ingot (Aluminum)</option>\n    <option value="27">Ficsite Ingot (Caterium)</option>\n    <option value="20">Ficsite Trigon</option>\n    <option value="261">FICSMAS Bow</option>\n    <option value="253">FICSMAS Decoration</option>\n    <option value="254">FICSMAS Ornament Bundle</option>\n    <option value="260">FICSMAS Tree Branch</option>\n    <option value="252">FICSMAS Wonder Star</option>\n    <option value="231">Ficsonium</option>\n    <option value="232">Ficsonium Fuel Rod</option>\n    <option value="52">Fuel</option>\n    <option value="165">Fused Modular Frame</option>\n    <option value="247">Gas Filter</option>\n    <option value="244">Hatcher Protein</option>\n    <option value="164">Heat Sink</option>\n    <option value="114">Heavy Modular Frame</option>\n    <option value="154">High-Speed Connector</option>\n    <option value="238">Hog Protein</option>\n    <option value="235">Iodine-Infused Filter</option>\n    <option value="15">Ionized Fuel</option>\n    <option value="258">Iron FICSMAS Ornament</option>\n    <option value="3">Iron Ingot</option>\n    <option value="36">Iron Ore (Limestone)</option>\n    <option value="1">Iron Plate</option>\n    <option value="2">Iron Rod</option>\n    <option value="37">Limestone (Sulfur)</option>\n    <option value="75">Liquid Biofuel</option>\n    <option value="159">Magnetic Field Generator</option>\n    <option value="115">Modular Engine</option>\n    <option value="123">Modular Frame</option>\n    <option value="107">Motor</option>\n    <option value="13">Neural-Quantum Processor</option>\n    <option value="137">Nitric Acid</option>\n    <option value="38">Nitrogen Gas (Bauxite)</option>\n    <option value="39">Nitrogen Gas (Caterium)</option>\n    <option value="138">Non-Fissile Uranium</option>\n    <option value="143">Nuclear Pasta</option>\n    <option value="98">Packaged Alumina Solution</option>\n    <option value="74">Packaged Fuel</option>\n    <option value="78">Packaged Heavy Oil Residue</option>\n    <option value="16">Packaged Ionized Fuel</option>\n    <option value="76">Packaged Liquid Biofuel</option>\n    <option value="142">Packaged Nitric Acid</option>\n    <option value="167">Packaged Nitrogen Gas</option>\n    <option value="77">Packaged Oil</option>\n    <option value="6">Packaged Rocket Fuel</option>\n    <option value="152">Packaged Sulfuric Acid</option>\n    <option value="46">Packaged Turbofuel</option>\n    <option value="79">Packaged Water</option>\n    <option value="53">Petroleum Coke</option>\n    <option value="54">Plastic</option>\n    <option value="141">Plutonium Fuel Rod</option>\n    <option value="140">Plutonium Pellet</option>\n    <option value="136">Pressure Conversion Cube</option>\n    <option value="89">Quartz Crystal</option>\n    <option value="236">Quickwire</option>\n    <option value="150">Radio Control Unit</option>\n    <option value="40">Raw Quartz (Bauxite)</option>\n    <option value="41">Raw Quartz (Coal)</option>\n    <option value="24">Reanimated SAM</option>\n    <option value="255">Red FICSMAS Ornament</option>\n    <option value="265">Reinforced Iron Plate</option>\n    <option value="56">Residual Fuel</option>\n    <option value="57">Residual Plastic</option>\n    <option value="58">Residual Rubber</option>\n    <option value="5">Rocket Fuel</option>\n    <option value="124">Rotor</option>\n    <option value="55">Rubber</option>\n    <option value="19">SAM Fluctuator</option>\n    <option value="267">Screw</option>\n    <option value="100">Silica</option>\n    <option value="233">Singularity Cell</option>\n    <option value="126">Smart Plating</option>\n    <option value="251">Smokeless Powder</option>\n    <option value="237">Solid Biofuel</option>\n    <option value="239">Spitter Protein</option>\n    <option value="108">Stator</option>\n    <option value="68">Steel Beam</option>\n    <option value="70">Steel Ingot</option>\n    <option value="69">Steel Pipe</option>\n    <option value="243">Stinger Protein</option>\n    <option value="42">Sulfur (Coal)</option>\n    <option value="43">Sulfur (Iron)</option>\n    <option value="151">Sulfuric Acid</option>\n    <option value="149">Supercomputer</option>\n    <option value="12">Superposition Oscillator</option>\n    <option value="250">Synthetic Power Shard</option>\n    <option value="200">Thermal Propulsion Rocket</option>\n    <option value="22">Time Crystal</option>\n    <option value="199">Turbo Motor</option>\n    <option value="45">Turbofuel</option>\n    <option value="102">Unpackage Alumina Solution</option>\n    <option value="81">Unpackage Fuel</option>\n    <option value="83">Unpackage Heavy Oil Residue</option>\n    <option value="17">Unpackage Ionized Fuel</option>\n    <option value="80">Unpackage Liquid Biofuel</option>\n    <option value="144">Unpackage Nitric Acid</option>\n    <option value="168">Unpackage Nitrogen Gas</option>\n    <option value="82">Unpackage Oil</option>\n    <option value="7">Unpackage Rocket Fuel</option>\n    <option value="155">Unpackage Sulfuric Acid</option>\n    <option value="47">Unpackage Turbofuel</option>\n    <option value="84">Unpackage Water</option>\n    <option value="158">Uranium Fuel Rod</option>\n    <option value="44">Uranium Ore (Bauxite)</option>\n    <option value="71">Versatile Framework</option>\n    <option value="269">Wire</option>\n';class y{static generatePowerTable(t,o,e){return t.map(((t,e)=>`\n      <tr>\n        <td class="m-0 p-0 w-50">\n          <select class="form-control rounded-0" name="power_building_id[]" min="0">\n            ${o.replace(`<option value="${t.buildingId}">`,`<option value="${t.buildingId}" selected>`)}\n          </select>\n        </td>\n        <td class="m-0 p-0 w-25">\n          <input type="number" value="${t.quantity}" class="form-control rounded-0" name="power_amount[]" min="0" step="any" data-index="${e}" onchange="updateConsumption()">\n        </td>\n        <td class="m-0 p-0 w-25">\n          <input type="number" value="${t.clockSpeed}" class="form-control rounded-0" name="power_clock_speed[]" min="1" max="250" step="any" data-index="${e}" onchange="updateConsumption()">\n        </td>\n        <td class="m-0 p-0 w-25">\n          <input type="number" value="${t.Consumption}" class="form-control rounded-0" disabled name="power_Consumption[]" min="0" step="any">\n        </td>\n        <td class="m-0 p-0 w-25">\n          <input type="hidden" value="${t.userRow?1:0}" class="form-control rounded-0" readonly name="user[]" min="0">\n        </td>\n      </tr>\n    `)).join("")+`\n      <tr>\n        <td class="m-0 p-0 w-50">\n          <select class="form-control rounded-0" name="power_building_id[]" min="0">\n            ${o.replace(/<option /,"<option selected ")} \x3c!-- Selects the first option --\x3e\n          </select>\n        </td>\n        <td class="m-0 p-0 w-25">\n          <input type="number" value="0" class="form-control rounded-0" name="power_amount[]" min="0" step="any" onchange="updateConsumption()">\n        </td>\n        <td class="m-0 p-0 w-25">\n          <input type="number" value="100" class="form-control rounded-0" name="power_clock_speed[]" min="1" max="250" step="any" onchange="updateConsumption()">\n        </td>\n        <td class="m-0 p-0 w-25">\n          <input type="number" value="0" class="form-control rounded-0" readonly name="power_Consumption[]" min="0" step="any">\n        </td>\n        <td class="m-0 p-0 w-25">\n          <input type="hidden" value="1" class="form-control rounded-0" readonly name="user[]" min="0">\n        </td>\n      </tr>\n    `+`\n      <tr>\n        <td colspan="1" class="table-dark">\n          Total:\n        </td>\n        <td colspan="2"></td>\n        <td class="w-25 m-0 p-0">\n          <input type="number" name="total_consumption" readonly class="form-control rounded-0" id="totalConsumption" value="${e}">\n        </td>\n      </tr>\n    `}static generateImportsTableRows(t){return t.map((t=>{const o=Number(t.quantity)%1==0?t.quantity.toFixed(0):t.quantity.toFixed(5);return`\n            <tr>\n                <td class="m-0 p-0 w-75">\n                    <select name="imports_item_id[]" class="form-control rounded-0">\n                        ${w.replace(`value="${t.itemId}"`,`value="${t.itemId}" selected`)}\n                    </select>\n                </td>\n                <td class="m-0 p-0 w-25">\n                    <input min="0" type="number" name="imports_ammount[]" class="form-control rounded-0" value="${o}" readonly>\n                </td>\n            </tr>\n        `})).join("")+`\n        <tr>\n            <td class="m-0 p-0 w-75">\n                <select name="imports_item_id[]" class="form-control rounded-0">\n                    ${w.replace(/<option /,"<option selected ")} \x3c!-- Selects the first option --\x3e\n                </select>\n            </td>\n            <td class="m-0 p-0 w-25">\n                <input min="0" type="number" name="imports_ammount[]" class="form-control rounded-0">\n            </td>\n        </tr>`}static generateProductionTableRows(t){return t.map((t=>{let o="",e="",n="";return t.doubleExport&&(o='style="height: 78px"',n='rowspan="2"',e=`\n            <tr class="extra-output">\n                <td class="m-0 p-0">\n                    <input type="text" readonly class="form-control rounded-0 product-name" value="${t.extraCells?.Product}">\n                </td>\n                <td class="m-0 p-0">\n                    <input min="0" type="number" step="any" name="production_usage2[]" value="${t.extraCells?.Usage}" required readonly class="form-control rounded-0 usage-amount">\n                </td>\n                <td class="m-0 p-0">\n                    <input min="0" type="number" step="any" name="production_export2[]" value="${t.extraCells?.Quantity}" required readonly class="form-control rounded-0 export-amount">\n                </td>\n            </tr>\n            `),` <tr>\n          <td class="hidden">\n            <input type="hidden" name="production_id[]" value="${t.row_id}">\n          </td>\n          <td class="m-0 p-0" ${n}>\n            <select name="production_recipe_id[]" class="form-control rounded-0 item-recipe-id recipe" ${o}>\n              ${f.replace(`value="${t.recipeId}"`,`value="${t.recipeId}" selected`)}\n            </select>\n          </td>\n          <td class="m-0 p-0" ${n}>\n            <input min="0" type="number" step="any" name="production_quantity[]" value="${t.quantity}" required class="form-control rounded-0 production-quantity" ${o}>\n          </td>\n          <td class="m-0 p-0">\n            <input type="text" readonly class="form-control rounded-0 product-name" value="${t.product}">\n          </td>\n          <td class="m-0 p-0">\n            <input min="0" type="number" step="any" name="production_usage[]" value="${t.Usage}" required readonly class="form-control rounded-0 usage-amount">\n          </td>\n          <td class="m-0 p-0">\n            <input min="0" type="number" step="any" name="production_export[]" value="${t.exportPerMin}" required readonly class="form-control rounded-0 export-amount">\n          </td>\n        </tr>\n        ${e}\n        `})).join("")+`\n        <tr>\n            <td class="m-0 p-0">\n                <select name="production_recipe_id[]" class="form-control rounded-0 item-recipe-id recipe">\n                    ${f.replace(/<option /,"<option selected ")}\n                </select>\n            </td>\n            <td class="m-0 p-0">\n                <input min="0" type="number" value="0" step="any" name="production_quantity[]" required class="form-control rounded-0 production-quantity">\n            </td>\n            <td class="m-0 p-0">\n                <input type="text" readonly class="form-control rounded-0 product-name">\n            </td>\n            <td class="m-0 p-0">\n                <input min="0" type="number" value="0" step="any" name="production_usage[]" required readonly class="form-control rounded-0 usage-amount">\n            </td>\n            <td class="m-0 p-0">\n                <input min="0" type="number" value="0" step="any" name="production_export[]" required readonly class="form-control rounded-0 export-amount">\n            </td>\n        </tr>\n    `}static createCard(t,o,e,n,i,a){return`\n        <div class="card mb-2">\n            <div class="card-body p-3">\n                <h5 class="card-title recipeName">${t}</h5>\n                <p class="card-text"><span class="productionAmount">${o}</span> per min - <span class="buildingAmount">${e}</span> <span class="buildingName">${a}</span></p>\n                <div style="display: flex; justify-content: space-between;">\n                    <div>\n                        <input type="checkbox" data-toggle="toggle" data-onstyle="success" data-offstyle="dark" for="build" class="beenBuild"\n                               data-onlabel="<i class='fa-solid fa-check'></i>" data-offlabel="<i class='fa-solid fa-times'></i>"\n                               data-size="sm" data-style="ios" data-theme="dark" ${n?"checked":""}/>\n                        <label for="build">Build</label>\n                    </div>\n                    <div>\n                        \x3c!--                        same checkbox as above--\x3e\n                        <input type="checkbox" data-toggle="toggle" data-onstyle="success" data-offstyle="dark" for="tested" class="beenTested"\n                               data-onlabel="<i class='fa-solid fa-check'></i>" data-offlabel="<i class='fa-solid fa-times'></i>"\n                               data-size="sm" data-style="ios" data-theme="dark" ${i?"checked":""}/>\n                        <label for="tested">Tested</label>\n                    </div>\n                </div>\n            </div>\n        </div>\n        `}}class C{static calculateBuildings(t,o){const e=o.filter((t=>1==t.userRow));e.pop();let n=[];for(let o=0;o+1<t.length;o++){const e=t[o],i=e.recipe;if(null!==i){const t=i.building,o=e.quantity,a=n.find((o=>o.buildingId===t.id));let l=o/i.export_amount_per_min,r=0;const s=+C.calculateConsumption(l,100,t.power_used);if(l%1!=0&&(r=l%1,l=Math.floor(l)),a?(a.quantity+=l,a.Consumption=+C.calculateConsumption(a.quantity,100,t.power_used)):n.push(new g(t.id,l,100,s,!1,t)),r>0){const o=100*r;if(o<1)continue;const e=+C.calculateConsumption(1,o,t.power_used);n.push(new g(t.id,1,+o.toFixed(5),e,!1,t))}}}n=n.concat(e);const i=y.generatePowerTable(n,b,C.calculateTotalConsumption(n));return $("#power tbody").html(i),n.push(new g),n}static calculateConsumption(t,o,e){return(t*e*Math.pow(o/100,1.321928)).toFixed(5)}static calculateTotalConsumption(t){const o=t.filter((t=>0!==t.Consumption)).reduce(((t,o)=>t+(Number(o.Consumption)||0)),0);return parseFloat(o.toFixed(5))}static calculateSingleConsumption(t){if(null===t.building)return 0;const o=Math.pow(t.clockSpeed/100,1.321928);return+(t.quantity*t.building.power_used*o).toFixed(5)}static async updateBuilding(t,o){t.building=await r.getBuilding(o),t.buildingId=o,t.Consumption=+C.calculateSingleConsumption(t)}static updateTotalConsumption(t){const o=C.calculateTotalConsumption(t);$("#totalConsumption").val(o)}}class x{index;amount;doubleExport;product;constructor(t=0,o=0,e="",n=!1){this.index=t,this.amount=o,this.product=e,this.doubleExport=n}}class S{static calculateImports(t){let o=[],e=this.resetUsage(t);for(let n=0;n+1<t.length;n++){const i=t[n],a=i.recipe?.resources,l=this.calculateProductionRate(i);a&&this.processRequiredItems(a,l,i,t,o,e)}const n=y.generateImportsTableRows(o);return $("#imports tbody").html(n),o.push(new l),{importsTableRows:o,indexes:e}}static resetUsage(t){const o=[];for(const e of t)if(e.productionImports=[],e.imports=[],e.Usage>0&&(o.push(t.indexOf(e)),e.Usage=0,e.exportPerMin=e.quantity),null!==e.extraCells&&e.extraCells.Usage>0){let n=t.indexOf(e);-1===n||o.includes(n)||o.push(n),e.extraCells.Usage=0,e.extraCells.ExportPerMin=e.extraCells.Quantity}return o}static calculateProductionRate(t){return t.recipe?.export_amount_per_min?t.quantity/t.recipe.export_amount_per_min:0}static processRequiredItems(t,o,e,n,i,a){for(const l of t){let t=l.importAmount*o;const r=n.filter((t=>t.product===l.name)),s=n.filter((t=>null!==t.extraCells&&t.extraCells.Product===l.name));let p=0,u=0;const{totalUsed:c,totalAvailable:d}=this.processProducedRows(r,t,u,p,n,a,e,l.name);u=c,p=d;const{totalUsed:h,totalAvailable:m}=this.processDoubleExportRows(s,t,u,p,n,a,e,l.name);u=h,p=m;const v=t-u;v>0&&this.addToImportsTable(i,l.itemId,v,e,l.name)}}static processProducedRows(t,o,e,n,i,a,l,r){for(const s of t){const t=s.quantity-s.Usage,p=Math.min(t,o-e);if(p<=0)continue;s.Usage+=+p.toFixed(5),s.exportPerMin=+(s.quantity-s.Usage).toFixed(5),e+=p,n+=t;const u=i.indexOf(s);l.productionImports.push(new x(u,p,r)),-1===u||a.includes(u)||a.push(u)}return{totalUsed:e,totalAvailable:n}}static processDoubleExportRows(t,o,e,n,i,a,l,r){for(const s of t){if(null===s.extraCells)continue;const t=s.extraCells.Quantity-s.extraCells.Usage,p=Math.min(t,o-e);if(p<=0)continue;s.extraCells.Usage+=+p.toFixed(5),s.extraCells.ExportPerMin=+(s.extraCells.Quantity-s.extraCells.Usage).toFixed(5),e+=p,n+=t;const u=i.indexOf(s);l.productionImports.push(new x(u,p,r,!0)),-1===u||a.includes(u)||a.push(u)}return{totalUsed:e,totalAvailable:n}}static addToImportsTable(t,o,e,n,i){const a=t.find((t=>t.itemId===o));(e=+e.toFixed(5))<=1e-4||(a?(a.quantity+=e,n.imports.push(new x(t.indexOf(a),e,i))):(t.push(new l(o,e,i)),n.imports.push(new x(t.length-1,e,i))))}}class k{autoImportExport=!0;autoPowerMachine=!0;autoSave=!1;constructor(){this.addEventListeners(),this.applyChanges()}applyChanges(){const t=new URL(window.location.href),o=parseInt(t.searchParams.get("id")),e=document.getElementById("auto_import_export"),n=document.getElementById("auto_power_machine");e&&(this.autoImportExport=e.checked),n&&(this.autoPowerMachine=n.checked),r.saveSettings(o,this.autoImportExport,this.autoPowerMachine,this.autoSave)}addEventListeners(){const t=document.getElementById("auto_import_export"),o=document.getElementById("auto_power_machine");t&&t.addEventListener("change",(()=>{$("#auto_import_export").parent().parent().tooltip("hide"),this.applyChanges()})),o&&o.addEventListener("change",(()=>{$("#auto_power_machine").parent().parent().tooltip("hide"),this.applyChanges()}))}}class A{id;product;quantity;X;Y;constructor(t,o,e){this.id=t,this.product=o,this.quantity=e,this.X=0,this.Y=0}}class I{id;product;quantity;building;buildingId;buildingAmount;X;Y;constructor(t,o,e,n,i,a){this.id=t,this.product=o,this.quantity=e,this.building=n,this.buildingId=i,this.buildingAmount=a,this.X=0,this.Y=0}}class R{id;product;quantity;X;Y;constructor(t,o,e){this.id=t,this.product=o,this.quantity=e,this.X=0,this.Y=0}}class T{id;sourceId;targetId;quantity;product;constructor(t,o,e,n,i){this.id=t,this.sourceId=o,this.targetId=e,this.quantity=n,this.product=i}}let P;class E{TableHandler;importNodes=[];productionNodes=[];exportNodes=[];importConnections=[];productionConnections=[];exportConnections=[];layout="klay";showExport=!1;showImport=!0;useRoots=!0;constructor(t){this.TableHandler=t,this.getterData(),this.createVisualization(),this.addEventListeners()}update(){this.getterData(),this.createVisualization()}async createVisualization(){await this.loadCytoscapeExtensions();let t=[];this.showImport&&(t.push(...this.importNodes.map((t=>this.addNode("import",t)))),[].push(...this.importNodes.map((t=>`import_${t.id}`))),t.push(...this.importConnections.map((t=>this.addConnection("import",t,"import","production"))))),t.push(...this.productionNodes.map((t=>this.addNode("production",t)))),t.push(...this.productionConnections.map(((t,o)=>({...this.addConnection("production",t,"production","production"),data:{...this.addConnection("production",t,"production","production").data,id:`productionConnection_${o}`}})))),this.showExport&&(t.push(...this.exportNodes.map((t=>this.addNode("export",t)))),t.push(...this.exportConnections.map((t=>this.addConnection("export",t,"production","export")))));const o=P({container:document.getElementById("graph"),elements:t,style:[{selector:"node",style:{label:"data(label)","background-color":"data(color)","text-halign":"center","text-valign":"center",width:200,height:200,color:"black","font-size":25,"text-wrap":"wrap"}},{selector:"node.top-text",style:{"text-margin-y":-60}},{selector:"edge",style:{label:"data(label)","font-size":25,"text-background-color":"white","text-background-opacity":.5,"text-background-padding":"3px","text-background-shape":"roundrectangle",color:"black",width:5,"line-color":"data(color)","target-arrow-color":"#333","target-arrow-shape":"triangle","target-arrow-fill":"filled","curve-style":"bezier","control-point-step-size":40}}],layout:{name:"klay",animate:!0,spacingFactor:2,nodeDimensionsIncludeLabels:!0,avoidOverlap:!0}});o.ready((()=>{o.nodes().forEach((t=>{this.applyQTip(t,t.data("title")),t.on("drag",(()=>{t.qtip("api").visible&&t.qtip("api").hide()})),t.on("mouseout",(()=>{t.qtip("api").hide()}))})),o.edges().forEach((t=>{this.applyQTip(t,t.data("label"))})),o.center(),o.fit()}))}applyQTip(t,o){t.qtip({content:o,position:{my:"top center",at:"bottom center"},style:{classes:"qtip-bootstrap",tip:{width:16,height:8}},show:{event:"mouseover",delay:100},hide:{event:"mouseout"}})}addNode(t,o){return{data:{id:`${t}_${o.id}`,label:`${o.product}\n${o.quantity}${o.building?`\n\n\n\n${o.building}\n${o.buildingAmount}`:""}`,color:"import"===t?"blue":"export"===t?"red":"green",title:`${t.charAt(0).toUpperCase()+t.slice(1)}: ${o.product}<br>Amount: ${o.quantity}${o.building?`<br><hr>Building: ${o.building}<br>Amount of building: ${o.buildingAmount}`:""}`},classes:"production"===t?"top-text":""}}addConnection(t,o,e,n){return{data:{id:`${t}Connection_${o.id}`,source:`${e}_${o.sourceId}`,target:`${n}_${o.targetId}`,label:`${o.product} ${o.quantity}`,color:"import"===t?"blue":"export"===t?"red":"green"}}}getterData(){this.importNodes=[],this.productionNodes=[],this.exportNodes=[],this.importConnections=[],this.productionConnections=[],this.exportConnections=[],this.getImportNodes(),this.getProduction(),this.getExportNodes(),this.getImportConnection()}addEventListeners(){$("#export").on("change",(t=>{const o=$(t.target);this.showExport=o.prop("checked"),this.createVisualization()})),$("#import").on("change",(t=>{const o=$(t.target);this.showImport=o.prop("checked"),this.createVisualization()})),$("#refresh").on("click",(()=>{this.createVisualization()})),$("#roots").on("change",(t=>{const o=$(t.target);this.useRoots=o.prop("checked"),this.createVisualization()}))}getImportConnection(){let t=0;for(let o=0;o<this.TableHandler.productionTableRows.length;o++){const e=this.TableHandler.productionTableRows[o];for(let n=0;n<e.imports.length;n++){const i=e.imports[n];this.importConnections.push(new T(t,i.index,o,+i.amount.toFixed(3),i.product)),t++}}}getProduction(){for(let t=0;t<this.TableHandler.productionTableRows.length;t++){const o=this.TableHandler.productionTableRows[t],e=o.recipe?.building,n=o.quantity,i=o.recipe;if(!i)continue;let a=(n/i.export_amount_per_min).toFixed(3);e&&i&&this.productionNodes.push(new I(t,i.name,o.quantity,e.name,e.id,+a));for(let e=0;e<o.productionImports.length;e++){const n=o.productionImports[e];this.productionConnections.push(new T(t,n.index,t,+n.amount.toFixed(3),n.product))}}}getImportNodes(){for(let t=0;t<this.TableHandler.importsTableRows.length;t++){const o=this.TableHandler.importsTableRows[t];""!==o.product&&o.quantity>0&&this.importNodes.push(new A(t,o.product,o.quantity))}}getExportNodes(){let t=0;for(let o=0;o<this.TableHandler.productionTableRows.length;o++){const e=this.TableHandler.productionTableRows[o];e.exportPerMin>0&&(this.exportNodes.push(new R(t,e.product,e.exportPerMin)),this.exportConnections.push(new T(t,o,this.exportNodes.length-1,e.exportPerMin,e.product)),t++),e.extraCells?.ExportPerMin>0&&(this.exportNodes.push(new R(t,e.product,e.extraCells?.ExportPerMin)),this.exportConnections.push(new T(t,o,this.exportNodes.length-1,e.extraCells?.ExportPerMin,e.product)),t++)}}async loadCytoscapeExtensions(){P=(await a.e(165).then(a.bind(a,165))).default;const{default:t}=await a.e(889).then(a.t.bind(a,889,23)),{default:o}=await a.e(503).then(a.t.bind(a,503,23));P.use(t),P.use(o)}}class F{static prepareSaveData(t,o,e,n){return{productionTableRows:t,powerTableRows:o,importsTableRows:e,checklist:n?.getChecklist()}}static saveProductionLine(t,o,e=!0){try{const n=new URL(window.location.href),i=parseInt(n.searchParams.get("id"));return r.saveData(t,i).then((t=>{if(t.success){if(!e)return!0;this.showSuccessMessage("Data successfully saved.");const n=t.data.newAndOldIds;return n.length>0&&this.updateProductionIds(n,o),!0}return this.showErrorMessage("An error occurred while saving the data. Please try again."),!1})).catch((t=>(this.showErrorMessage("An error occurred while saving the data. Please try again."),!1)))}catch(t){return this.showErrorMessage("An error occurred while saving the data. Please try again."),Promise.resolve(!1)}}static showSuccessMessage(t){this.showMessage("saveSuccessAlert",t)}static showErrorMessage(t){this.showMessage("saveErrorAlert",t)}static showMessage(t,o){const e=document.getElementById(t);e&&(e.textContent=o,e.classList.add("d-none"),e.classList.remove("show"),e.offsetWidth,e.classList.remove("d-none"),e.classList.add("show"),setTimeout((()=>{e.classList.remove("show"),setTimeout((()=>{e.classList.add("d-none")}),150)}),5e3))}static updateProductionIds(t,o){console.log(o),t.forEach((t=>{const e=t.new,n=t.old;$(`#recipes input[type="hidden"][name="production_id[]"][value="${n}"]`).val(e);const i=o.productionTableRows.find((t=>t.row_id===n));i&&(i.row_id=e)})),console.log(o)}}class _{htmlElement=$("#Checklist");canvasBody=this.htmlElement.find(".offcanvas-body");tableHandler;checklist=[];constructor(t){this.tableHandler=t,this.CheckForExistingChecklist(),this.attachEvents(),console.log(this.checklist)}CheckForExistingChecklist(){const t=this.htmlElement.find("#checkListData").text();t?(JSON.parse(t).forEach(((t,o)=>{const e=t.production_id,n=1===t.been_build,i=1===t.been_tested,a=this.tableHandler.productionTableRows.find((t=>t.row_id==e));a&&this.checklist.push({index:o,productionRow:a,beenBuild:n,beenTested:i})})),this.buildChecklist(),this.generateMissingChecklist()):this.createChecklist()}buildChecklist(){this.checklist.forEach(((t,o)=>{this.createChecklistCard(t.productionRow,o,t.beenBuild,t.beenTested)})),this.initCheckBoxes()}createChecklist(){this.checklist=[],$("#Checklist .offcanvas-body").empty(),this.tableHandler.productionTableRows.forEach(((t,o)=>{this.createChecklistCard(t,o),this.checklist.push({index:o,productionRow:t,beenBuild:!1,beenTested:!1})})),this.initCheckBoxes()}createChecklistCard(t,o,e=!1,n=!1){if(o===this.tableHandler.productionTableRows.length-1)return;const i=t.quantity,a=t.recipe?.name||"Unknown",l=t.recipe?.building?.name||"Unknown",r=t.recipe?.export_amount_per_min||0,s=+Math.ceil(i/r).toFixed(5);i<=0||this.canvasBody.append(y.createCard(a,i,s,e,n,l))}updateCheckList(t){const o=this.checklist.find((o=>o.productionRow.row_id==t.row_id));if(o){const e=o.productionRow,n=e.quantity,i=e.recipe?.name||"Unknown",a=e.recipe?.building?.name||"Unknown",l=e.recipe?.export_amount_per_min||0,r=+Math.ceil(n/l).toFixed(5),s=this.canvasBody.find(".card")[o.index];$(s).replaceWith(y.createCard(i,n,r,!1,!1,a)),this.checklist[o.index]={index:o.index,productionRow:t,beenBuild:!1,beenTested:!1}}else this.createChecklistCard(t,this.tableHandler.productionTableRows.length-1),this.checklist.push({index:this.tableHandler.productionTableRows.length-1,productionRow:t,beenBuild:!1,beenTested:!1});this.initCheckBoxes()}attachEvents(){const t=$("#Checklist #searchChecklist"),o=$("#Checklist #resetSearchChecklist");t.on("input",(()=>{const o=t.val();this.searchChecklist(o)})),o.on("click",(()=>{t.val(""),this.clearSearch()}));const e=$("#Checklist .offcanvas-body").find("input[type='checkbox'][for='tested']"),n=$("#Checklist .offcanvas-body").find("input[type='checkbox'][for='build']");e.on("change",(t=>{const o=e.index(t.target);this.checklist[o].beenTested=$(t.target).is(":checked")})),n.on("change",(t=>{const o=n.index(t.target);this.checklist[o].beenBuild=$(t.target).is(":checked")}))}generateMissingChecklist(){this.tableHandler.productionTableRows.forEach(((t,o)=>{this.checklist.find((o=>o.productionRow.row_id==t.row_id))||(this.createChecklistCard(t,o),this.checklist.push({index:o,productionRow:t,beenBuild:!1,beenTested:!1}))}))}searchChecklist(t){t=t.toLowerCase();const o=$("#Checklist .offcanvas-body");o.find(".alert").remove();const e=o.find(".card");e.each(((o,e)=>{$(e).find(".recipeName").text().toLowerCase().includes(t)?$(e).show():$(e).hide()})),e.toArray().some((t=>$(t).is(":visible")))||o.append("<div class='alert alert-danger'>No results found</div>")}clearSearch(){$("#Checklist .offcanvas-body").find(".card").each(((t,o)=>{$(o).show()}))}getChecklist(){const t=this.checklist.filter((t=>0!=+t.productionRow.quantity&&t.productionRow.quantity));return console.log(t),t}initCheckBoxes(){this.canvasBody.find("input[type='checkbox']").each(((t,o)=>{$(o).bootstrapToggle()}))}}class M{static async importData(t){if(!this.checkIfFileIsSelected()||!this.checkIfFileIsJson())return;const o=$("#importFile").prop("files")[0],e=new FileReader;e.readAsText(o),e.onload=o=>{const e=JSON.parse(o.target?.result);e.productionTable&&e.powerTable&&e.importTable?(t.saveData(e.productionTable,e.powerTable,e.importTable),this.showSuccessMessage("Data successfully imported.")):this.showErrorMessage("The selected file does not contain the required data.")}}static exportData(t){const o=t.productionTableRows,e=t.importsTableRows,n=t.powerTableRows,i={productionTable:o,powerTable:n,importTable:e};console.log(n);const a=(new TextEncoder).encode(JSON.stringify(i)),l=new Blob([a],{type:"application/json"}),r=URL.createObjectURL(l),s=document.createElement("a");s.href=r,s.download=this.generateFileName(),s.click(),URL.revokeObjectURL(r),this.showSuccessMessage("Data successfully exported.")}static checkIfFileIsSelected(){const t=document.getElementById("importFile");if(!t.files?.length){t.classList.add("is-invalid");const o=t.nextElementSibling;return o&&o.classList.add("d-block"),!1}t.classList.remove("is-invalid");const o=t.nextElementSibling;return o&&o.classList.remove("d-block"),!0}static checkIfFileIsJson(){const t=document.getElementById("importFile"),o=t.files?.[0];if(o&&"application/json"!==o.type){t.classList.add("is-invalid");const o=t.nextElementSibling;return o&&(o.textContent="Please select a valid JSON file.",o.classList.add("d-block")),!1}return!0}static showMessage(t,o){const e=document.getElementById(t);e&&(e.textContent=o,e.classList.add("d-none"),e.classList.remove("show"),e.offsetWidth,e.classList.remove("d-none"),e.classList.add("show"),setTimeout((()=>{e.classList.remove("show"),setTimeout((()=>{e.classList.add("d-none")}),150)}),5e3))}static showSuccessMessage(t,o=1){1!==o||this.showMessage("successAlert",t)}static showErrorMessage(t,o=1){1!==o||this.showMessage("errorAlert",t)}static generateFileName(){const t=Intl.DateTimeFormat().resolvedOptions().timeZone,o=(new Date).toLocaleString("en-GB",{timeZone:t}).replace(/[\/\s,:]/g,"_");let e=$("#productionLineName").text().replace("Production Line - ","");return e=e.replace(/\s/g,"_"),`${e}_data_${o}.json`}}const B=new class{importsTableRows=[];productionTableRows=[];powerTableRows=[];settings=new k;checklist=null;visualisation=null;updated=!1;cacheVersion=$("#dataVersion").val();buildingCache=[];recipeCache=[];progressBar=$("#loading-progress");progressInterval=0;totalRows=0;finishedRows=0;constructor(){this.initialize()}async initialize(){this.CheckCacheVersion();let t=500;(0===window.performance.getEntriesByType("navigation").length||window.performance.getEntriesByType("navigation").map((t=>t.type)).includes("reload"))&&(t=0),this.loadFromLocal(),await this.getTableData(),this.addEventListeners(),this.addButtonEventListeners(),this.addShortcuts(),setTimeout((()=>{this.hideLoading(),this.enableButtons()}),t),this.checklist=new _(this)}async getTableData(){this.totalRows=$("#recipes tbody tr").length,this.progressInterval=100/this.totalRows,this.productionTableRows=await this.readTable("recipes",v,!0),await this.readTable("imports",l).then((t=>{this.importsTableRows=t})).catch((t=>{console.error("Failed to load imports table rows:",t)})),this.readTable("power",g).then((t=>{this.powerTableRows=t,this.saveToLocal(),this.showCacheAmount()})).catch((t=>{console.error("Failed to load power table rows:",t)}))}async readTable(t,o,e=!1){const n=$(`#${t} tbody tr`);let i=0;"power"===t&&(i=1);const a=[];for(let l=0;l<n.length-i;l++){const i=n[l],r=$(i).find("input, select"),p=[];if(r.each(((t,o)=>{"number"===$(o).attr("type")?p.push(Number($(o).val())):p.push($(o).val())})),"recipes"===t&&n[l+1]?.classList.contains("extra-output")){const t=n[l+1],o=$(t).find("input, select").map(((t,o)=>$(o).val())).get(),e=new s(o[0],Number(o[1]),Number(o[2]));p.push(!0,e),l++,this.finishedRows++}else"recipes"===t&&p.push(!1,null);"recipes"===t&&p.push(this.recipeCache),"power"===t&&(p.push(null),p.push(this.buildingCache));const u=o.create(...p).then((t=>(e&&this.updateProgress(),t)));a.push(u)}return await Promise.all(a)}saveToLocal(){localStorage.setItem("cachedData",JSON.stringify({Version:this.cacheVersion,Recipe:this.recipeCache,Building:this.buildingCache}))}showCacheAmount(){$("#cachedRecipes").html(this.recipeCache.length.toString()),$("#cachedBuildings").html(this.buildingCache.length.toString())}emptyLocal(){localStorage.removeItem("cachedData")}loadFromLocal(){const t=JSON.parse(localStorage.getItem("cachedData")||"{}");this.recipeCache=t.Recipe||[],this.buildingCache=t.Building||[],$("#cachedRecipes").html(this.recipeCache.length.toString()),$("#cachedBuildings").html(this.buildingCache.length.toString())}CheckCacheVersion(){console.log(this.cacheVersion),JSON.parse(localStorage.getItem("cachedData")||"{}").Version!==this.cacheVersion.toString()&&(this.emptyLocal(),this.loadFromLocal())}hideLoading(){$("#loading").addClass("d-none"),$("#main-content").removeClass("d-none")}showLoading(t=!0){this.progressBar.parent().removeClass("d-none"),$("#loading").removeClass("d-none"),$("#main-content").addClass("d-none"),t||this.progressBar.parent().addClass("d-none")}updateProgress(){this.finishedRows++;const t=Math.round(this.finishedRows*this.progressInterval);this.progressBar.css("width",`${t}%`),this.progressBar.attr("aria-valuenow",t),this.progressBar.html(`${t}%`)}async addEventListeners(){["imports","recipes","power"].forEach((t=>{$(`#${t} tbody`).find("input, select").each(((o,e)=>{$(e).on("change",(o=>{this.handleInputChange(o,t)}))}))}))}addSpecificEventListener(t){$(`#${t} tbody`).find("input, select").each(((o,e)=>{$(e).on("change",(o=>{this.handleInputChange(o,t)}))}))}async handleInputChange(t,o){const e=$(t.target),n=e.closest("tr").index(),i=e.closest("tr").prevAll(".extra-output").length,a=e.closest("td").index(),l=e.val();this.checkIfLastRow(e,o)&&this.checkIfSelect(e)&&this.addNewRow(o);const r=this.getRowByTableIdAndIndex(o,n-i);if(r&&a>=0)switch(this.updateRowData(r,a,l),o){case"imports":default:break;case"recipes":await this.HandleProductionTable(r,n,l,o,e),this.checklist?.updateCheckList(r);break;case"power":await this.HandlePowerTable(r,n,l,o,e)}}getRowByTableIdAndIndex(t,o){switch(t){case"imports":return this.importsTableRows[o];case"recipes":return this.productionTableRows[o];case"power":return this.powerTableRows[o];default:return null}}updateRowData(t,o,e){t[Object.keys(t)[o]]=e}updateRowInTable(t,o,e){const n=$(`#${t} tbody tr`);let i=$(n[o]);i.find("input, select").each(((t,o)=>{const n=Object.keys(e)[t];let i;i=e.recipe&&e.recipe.hasOwnProperty(n)?e.recipe[n]:e[n],$(o).val(i)})),"recipes"===t&&p.handleDoubleExport(e,i)}addNewRow(t){let o;o="power"===t?$(`#${t} tbody tr:nth-last-child(2)`):$(`#${t} tbody tr:last`);const e=o.clone();switch(e.find('input[type="number"]').val(0),e.find('input[type="text"]').val(""),e.find('input[name="power_clock_speed[]"]').val(100),e.find("select").prop("selectedIndex",0),e.insertAfter(o),e.find("input, select").each(((o,e)=>{$(e).on("change",(o=>{this.handleInputChange(o,t)}))})),t){case"imports":this.importsTableRows.push(new l);break;case"recipes":this.productionTableRows.push(new v);break;case"power":this.powerTableRows.push(new g)}}checkIfLastRow(t,o){return"power"===o?t.closest("tr").is(":nth-last-child(2)"):t.closest("tr").is(":last-child")}checkIfSelect(t){return t.is("select")}UpdateOnIndex(t){for(let o=0;o<t.length;o++){const e=t[o],n=(this.productionTableRows[e],this.productionTableRows.slice(0,e).filter((t=>t.doubleExport)).length),i=this.productionTableRows[e];this.updateRowInTable("recipes",e+n,i)}}async HandlePowerTable(t,o,e,n,i){this.checkIfSelect(i)?await C.updateBuilding(t,e):t.Consumption=C.calculateSingleConsumption(t),this.updateRowInTable(n,o,t),C.updateTotalConsumption(this.powerTableRows)}showVisualization(){if(this.settings.autoImportExport){const t=S.calculateImports(this.productionTableRows);this.importsTableRows=t.importsTableRows}this.visualisation?this.updated&&(this.updated=!1,this.visualisation.update()):(this.updated=!1,this.visualisation=new E(this)),$("#showVisualization").modal("show")}saveData(t,o,e){this.productionTableRows=(t.pop(),t),this.powerTableRows=(o.pop(),o),this.importsTableRows=(e.pop(),e),this.generateTables(),this.powerTableRows.push(new g),this.productionTableRows.push(new v),this.importsTableRows.push(new l)}generateTables(){$("#power tbody").html(y.generatePowerTable(this.powerTableRows,b,C.calculateTotalConsumption(this.powerTableRows))),$("#imports tbody").html(y.generateImportsTableRows(this.importsTableRows)),$("#recipes tbody").html(y.generateProductionTableRows(this.productionTableRows)),this.addEventListeners()}disableButtons(){$("#save_button").addClass("disabled"),$("#save_button").prop("disabled",!0),$("#showPower").addClass("disabled"),$("#showPower").prop("disabled",!0)}enableButtons(){$("#save_button").removeClass("disabled"),$("#save_button").prop("disabled",!1),$("#showPower").removeClass("disabled"),$("#showPower").prop("disabled",!1),$("#showVisualizationButton").removeClass("disabled"),$("#showVisualizationButton").prop("disabled",!1),$("#edit_product_line").removeClass("disabled"),$("#edit_product_line").prop("disabled",!1),$("#showCheckList").removeClass("disabled"),$("#showCheckList").prop("disabled",!1)}async HandleProductionTable(t,o,e,n,i){if(this.updated=!0,await p.calculateProductionExport(t),this.checkIfSelect(i)&&await p.updateRecipe(t,e),console.log(t),this.updateRowInTable(n,o,t),console.log(t),this.settings.autoImportExport){const t=S.calculateImports(this.productionTableRows);this.importsTableRows=t.importsTableRows,this.UpdateOnIndex(t.indexes)}this.settings.autoPowerMachine&&(this.powerTableRows=C.calculateBuildings(this.productionTableRows,this.powerTableRows),this.addSpecificEventListener("power"))}async addShortcuts(){const t=this;document.addEventListener("DOMContentLoaded",(function(){document.addEventListener("keydown",(o=>{const e=$("#showPowerModal"),n=$("#editProductionLine"),i=$("#helpModal"),a=$("#showVisualization");function l(){e.modal("hide"),n.modal("hide"),i.modal("hide"),a.modal("hide")}if(o.ctrlKey&&"s"===o.key&&(o.preventDefault(),F.saveProductionLine(F.prepareSaveData(t.productionTableRows,t.powerTableRows,t.importsTableRows,t.checklist),t)),o.ctrlKey&&"p"===o.key&&(o.preventDefault(),e.is(":hidden")?(l(),e.modal("show")):e.modal("hide")),o.ctrlKey&&"e"===o.key&&(o.preventDefault(),l(),n.is(":hidden")?(l(),n.modal("show")):n.modal("hide")),o.ctrlKey&&"h"===o.key&&(o.preventDefault(),i.is(":hidden")?(l(),i.find("#welcome").hide(),i.modal("show")):i.modal("hide")),o.ctrlKey&&"q"===o.key&&(o.preventDefault(),window.history.back()),"v"===o.key&&o.ctrlKey){if(["INPUT","SELECT","TEXTAREA","BUTTON"].includes(o.target.tagName))return;o.preventDefault(),a.is(":hidden")?(l(),t.showVisualization()):a.modal("hide")}}))}))}async addButtonEventListeners(){$("#showVisualizationButton").on("click",(()=>{this.showVisualization()})),$("#removeCache").on("click",(()=>{this.emptyLocal(),this.loadFromLocal(),this.showCacheAmount()}))}},L=$("#save_button");L.on("click",(t=>{t.shiftKey?(t.preventDefault(),F.saveProductionLine(F.prepareSaveData(B.productionTableRows,B.powerTableRows,B.importsTableRows,B.checklist),B),L.tooltip("hide"),L.blur()):(t.preventDefault(),B.showLoading(!1),F.saveProductionLine(F.prepareSaveData(B.productionTableRows,B.powerTableRows,B.importsTableRows,B.checklist),B,!1).then((t=>{t?window.location.href="/game_save?id="+$("#gameSaveId").val():B.hideLoading()})))}));const U=$("#exportButton"),N=$("#importButton");return U.on("click",(()=>{M.exportData(B)})),N.on("click",(t=>{t.preventDefault(),M.importData(B)})),{}})()));